<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Normal Team Scoreboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .foul-float {
      position: absolute;
      font-size: 1.2rem;
      font-weight: bold;
      opacity: 1;
      animation: floatUp 1s ease-out forwards;
      pointer-events: none;
    }
    @keyframes floatUp {
      0%   { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-30px); opacity: 0; }
    }
  </style>
</head>
<body class="bg-stone-50 text-stone-900 min-h-screen">

  <!-- Header -->
  <div class="fixed top-0 left-0 w-full px-4 py-2 flex items-center justify-between bg-black/30 backdrop-blur z-50">
    <span class="text-black font-extrabold text-xl tracking-wide">Normal Scoreboard</span>
    <button id="controlsToggle"
      class="bg-white px-3 py-1 rounded transition-colors"
      aria-expanded="false" aria-controls="controlsPanel">
      Controls â–¾
    </button>
  </div>

  <!-- Controls Panel -->
  <div id="controlsPanel"
    class="fixed left-0 right-0 top-[44px] mx-auto bg-white shadow-lg border-t border-gray-200 overflow-hidden max-h-0 transition-[max-height] duration-500 ease-in-out z-40">
    <div class="px-4 py-3 grid gap-4 sm:grid-cols-2 text-black">
      <div class="flex flex-wrap gap-2">
        <button onclick="clearGame()" class="bg-gray-100 px-3 py-1 rounded">Clear</button>
        <button onclick="toggleLiveSharing()" id="liveToggle" class="bg-emerald-600 text-white px-3 py-1 rounded">
          Live score sharing: OFF
        </button>
        <button onclick="showHistory()" class="bg-gray-100 px-3 py-1 rounded">History</button>
      </div>
    </div>
  </div>

  <!-- Players -->
  <div id="playerContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-4 px-4 pt-24 pb-28">
    <!-- Player 1 -->
    <div id="card-1" class="bg-white rounded-lg p-4 shadow-md">
      <div class="flex flex-col items-center gap-3 text-center">
        <input id="name-1" maxlength="20"
          class="w-44 sm:w-56 px-3 py-1 rounded text-black text-base sm:text-lg text-center"
          value="Player 1"/>
        <input id="team-1" maxlength="20"
          class="w-44 sm:w-56 px-3 py-1 rounded text-black text-sm text-center"
          value="Team 1"/>
        <div>
          <span id="score-1" class="block text-6xl font-extrabold">0</span>
        </div>
        <div class="grid grid-cols-3 gap-2 w-full max-w-md mt-2">
          <button data-action="plus" class="px-3 py-2 rounded bg-green-500 text-white">+1</button>
          <button data-action="minus" class="px-3 py-2 rounded bg-red-500 text-white">-1</button>
          <button data-action="foul" class="px-3 py-2 rounded bg-yellow-500 text-black">FOUL</button>
        </div>
      </div>
    </div>

    <!-- Player 2 -->
    <div id="card-2" class="bg-white rounded-lg p-4 shadow-md">
      <div class="flex flex-col items-center gap-3 text-center">
        <input id="name-2" maxlength="20"
          class="w-44 sm:w-56 px-3 py-1 rounded text-black text-base sm:text-lg text-center"
          value="Player 2"/>
        <input id="team-2" maxlength="20"
          class="w-44 sm:w-56 px-3 py-1 rounded text-black text-sm text-center"
          value="Team 2"/>
        <div>
          <span id="score-2" class="block text-6xl font-extrabold">0</span>
        </div>
        <div class="grid grid-cols-3 gap-2 w-full max-w-md mt-2">
          <button data-action="plus" class="px-3 py-2 rounded bg-green-500 text-white">+1</button>
          <button data-action="minus" class="px-3 py-2 rounded bg-red-500 text-white">-1</button>
          <button data-action="foul" class="px-3 py-2 rounded bg-yellow-500 text-black">FOUL</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase init -->
  <script src="config.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getFirestore, collection, doc, setDoc, addDoc, updateDoc, serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = window.__FIREBASE_CONFIG__;
    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    window.__live = {
      db,
      fns: { collection, doc, setDoc, addDoc, updateDoc, serverTimestamp }
    };
  </script>

  <!-- Main Logic -->
  <script src="normal-script.js"></script>

  <!-- History Popup -->
  <div id="historyPopup" class="fixed inset-0 bg-black bg-opacity-50 hidden fade z-50 flex items-center justify-center">
    <div class="bg-white rounded-lg shadow-lg w-11/12 max-w-lg p-4 max-h-[80vh] overflow-y-auto relative">
      <button onclick="hideHistory()" class="absolute top-2 right-3 text-xl font-bold">&times;</button>
      <h2 class="text-lg font-bold mb-3">ðŸ“œ Score History</h2>
      <ul id="logList" class="text-sm space-y-2 text-black"></ul>
    </div>
  </div>  

</body>
</html>
